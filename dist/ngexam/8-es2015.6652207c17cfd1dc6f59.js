(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8XG9":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("LRne"),i=n("fXoL"),c=n("bB31");let r=(()=>{class e{constructor(e){this.messageService=e,this.createHandleError=(e="")=>(t="operation",n={})=>this.handleError(e,t,n)}handleError(e="",t="operation",n={}){return i=>{console.log(i);const c=i.error instanceof ErrorEvent?i.error.message:`Serve feedback${i.status},feedback information${i.error}`;return this.messageService.err(`${e}:${t}:Content:${c}`),Object(a.a)(n)}}}return e.\u0275fac=function(t){return new(t||e)(i.ec(c.a))},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},FSjk:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("tyNb"),c=n("nPFy"),r=n("fXoL"),s=n("94Cw"),o=n("PScX"),h=n("dEAy"),d=n("OzZK"),u=n("rMZv"),l=n("5vDB"),p=n("KupA"),g=n("SKKP"),f=n("FGh6");function b(e,t){1&e&&(r.Yb(0),r.Vb(1,"nz-badge",11),r.Xb()),2&e&&(r.Db(1),r.tc("nzStatus","success")("nzText","PASS"))}function m(e,t){1&e&&(r.Yb(0),r.Vb(1,"nz-badge",11),r.Xb()),2&e&&(r.Db(1),r.tc("nzStatus","error")("nzText","NOT PASS"))}function z(e,t){if(1&e){const e=r.bc();r.ac(0,"tr"),r.ac(1,"td",6),r.ic("nzCheckedChange",(function(n){r.Cc(e);const a=t.$implicit;return r.lc().mapOfCheckedId[a._id]=n}))("nzCheckedChange",(function(){return r.Cc(e),r.lc().refreshStatus()})),r.Zb(),r.ac(2,"td"),r.Mc(3),r.Zb(),r.ac(4,"td"),r.ac(5,"a",7),r.ic("click",(function(){r.Cc(e);const n=t.$implicit;return r.lc().showExamInfo(n.examInfo)})),r.Mc(6),r.mc(7,"formatLength"),r.Zb(),r.Zb(),r.ac(8,"td"),r.Kc(9,b,2,2,"ng-container",8),r.Kc(10,m,2,2,"ng-container",8),r.Zb(),r.ac(11,"td"),r.Mc(12),r.mc(13,"formatTime"),r.Zb(),r.ac(14,"td"),r.ac(15,"a",7),r.ic("click",(function(){r.Cc(e);const n=t.$implicit;return r.lc().goQuestion(n._id)})),r.Mc(16,"Add Exam Sheet"),r.Zb(),r.Vb(17,"nz-divider",9),r.ac(18,"a",10),r.ic("nzOnConfirm",(function(){r.Cc(e);const n=t.$implicit;return r.lc().deleteExam(n._id)})),r.Mc(19,"Delete"),r.Zb(),r.Zb(),r.Zb()}if(2&e){const e=t.$implicit,n=r.lc();r.Db(1),r.tc("nzChecked",n.mapOfCheckedId[e._id]),r.Db(2),r.Nc(e.examName),r.Db(3),r.Nc(r.oc(7,6,e.examInfo,5)),r.Db(3),r.tc("ngIf",1==e.state),r.Db(1),r.tc("ngIf",0==e.state),r.Db(2),r.Nc(r.nc(13,9,e.date))}}const C=[{path:"",component:(()=>{class e{constructor(e,t,n,a,i){this.router=e,this.examService=t,this.pageService=n,this.nzMessageService=a,this.nzModalService=i,this.examList=[],this.isAllDisplayDataChecked=!1,this.isIndeterminate=!1,this.listOfDisplayData=[],this.listOfAllData=[],this.mapOfCheckedId={}}ngOnInit(){this.getExamList()}showExamInfo(e){this.nzModalService.info({nzTitle:"Exam Description",nzContent:`<p>${e}</p>`})}getExamList(e=!1){this.tableLoading=!0,this.examService.getExamList({pageIndex:this.pageService.pageIndex,pageSize:this.pageService.pageSize}).subscribe(e=>{console.log(e),this.examList=e.userInfo,this.pageService.total=e.total,this.tableLoading=!1})}currentPageDataChange(e){this.listOfDisplayData=e,this.refreshStatus()}refreshStatus(){this.isAllDisplayDataChecked=this.listOfDisplayData.every(e=>this.mapOfCheckedId[e._id]),this.isIndeterminate=this.listOfDisplayData.some(e=>this.mapOfCheckedId[e._id])&&!this.isAllDisplayDataChecked}checkAll(e){this.listOfDisplayData.forEach(t=>this.mapOfCheckedId[t._id]=e),this.refreshStatus()}approved(e){console.log(Object.keys(this.mapOfCheckedId).filter(e=>{if(this.mapOfCheckedId[e])return e})),this.examService.approved({mapOfCheckedId:Object.keys(this.mapOfCheckedId).filter(e=>{if(this.mapOfCheckedId[e])return e}),state:e}).subscribe(e=>{0===e.code?(this.nzMessageService.success("review success"),this.mapOfCheckedId={},this.getExamList()):this.nzMessageService.error("review failed")})}goQuestion(e){this.router.navigate(["adminQuestion",{id:e}])}deleteExam(e){this.examService.deleteExam(e).subscribe(e=>{0===e.code?(this.pageService.pageIndex=1,this.getExamList(),this.nzMessageService.success("Delete exam sucessfully\uff01")):this.nzMessageService.success("Delete exam Failed\uff01")})}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(i.d),r.Ub(s.a),r.Ub(c.a),r.Ub(o.e),r.Ub(h.c))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-admin-exam"]],features:[r.Cb([c.a])],decls:22,vars:9,consts:[[1,"table-operations"],["nz-button","",3,"click"],["nzShowSizeChanger","",3,"nzData","nzLoading","nzPageIndex","nzPageSize","nzTotal","nzFrontPagination","nzCurrentPageDataChange","nzPageIndexChange","nzPageSizeChange"],["rowSelectionTable",""],["nzShowCheckbox","",3,"nzChecked","nzIndeterminate","nzCheckedChange"],[4,"ngFor","ngForOf"],["nzShowCheckbox","",3,"nzChecked","nzCheckedChange"],[3,"click"],[4,"ngIf"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","Sure to delete?",3,"nzOnConfirm"],[3,"nzStatus","nzText"]],template:function(e,t){if(1&e&&(r.ac(0,"div",0),r.ac(1,"button",1),r.ic("click",(function(){return t.approved(1)})),r.Mc(2,"PASS REVIEW"),r.Zb(),r.ac(3,"button",1),r.ic("click",(function(){return t.approved(0)})),r.Mc(4,"NOT PASS"),r.Zb(),r.Zb(),r.ac(5,"nz-table",2,3),r.ic("nzCurrentPageDataChange",(function(e){return t.currentPageDataChange(e)}))("nzPageIndexChange",(function(e){return t.pageService.pageIndex=e}))("nzPageSizeChange",(function(e){return t.pageService.pageSize=e}))("nzPageIndexChange",(function(){return t.getExamList()}))("nzPageSizeChange",(function(){return t.getExamList(!0)})),r.ac(7,"thead"),r.ac(8,"tr"),r.ac(9,"th",4),r.ic("nzCheckedChange",(function(e){return t.isAllDisplayDataChecked=e}))("nzCheckedChange",(function(e){return t.checkAll(e)})),r.Zb(),r.ac(10,"th"),r.Mc(11,"Exam Name"),r.Zb(),r.ac(12,"th"),r.Mc(13,"Exam Description"),r.Zb(),r.ac(14,"th"),r.Mc(15,"Review Status"),r.Zb(),r.ac(16,"th"),r.Mc(17,"Date"),r.Zb(),r.ac(18,"th"),r.Mc(19,"Operation"),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"tbody"),r.Kc(21,z,20,11,"tr",5),r.Zb(),r.Zb()),2&e){const e=r.Bc(6);r.Db(5),r.tc("nzData",t.examList)("nzLoading",t.tableLoading)("nzPageIndex",t.pageService.pageIndex)("nzPageSize",t.pageService.pageSize)("nzTotal",t.pageService.total)("nzFrontPagination",!1),r.Db(4),r.tc("nzChecked",t.isAllDisplayDataChecked)("nzIndeterminate",t.isIndeterminate),r.Db(12),r.tc("ngForOf",e.data)}},directives:[d.a,u.a,u.f,u.g,u.e,u.c,a.k,u.d,a.l,l.a,p.a,g.a],pipes:[f.a,f.b],styles:[".table-operations[_ngcontent-%COMP%]{margin-bottom:16px}.table-operations[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:8px}"]}),e})(),canActivate:[n("UeAQ").a]}];let S=(()=>{class e{}return e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(C)],i.g]}),e})();var v=n("Yonh"),k=n("0nng"),x=n("3Pt+");n.d(t,"AdminExamModule",(function(){return D}));let D=(()=>{class e{}return e.\u0275mod=r.Sb({type:e}),e.\u0275inj=r.Rb({factory:function(t){return new(t||e)},imports:[[a.c,S,v.a,k.a,x.i,x.p]]}),e})()},OqvA:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("fXoL");let i=(()=>{class e{constructor(){this.url="http://127.0.0.1:8081"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},bB31:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("tk/3"),i=n("fXoL"),c=n("OqvA");let r=(()=>{class e{constructor(e,t){this.http=e,this.config=t,this.token="pass",this.httpOptions={headers:new a.e({"Content-Type":"application/json","x-access-token":this.token})}}add(e){return this.http.post(`${this.config.url}/log/message`,e,this.httpOptions)}err(e){console.log(e)}getOneDataLog(e){return this.http.post(`${this.config.url}/log/getOneDataLog`,e,this.httpOptions)}}return e.\u0275fac=function(t){return new(t||e)(i.ec(a.b),i.ec(c.a))},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);